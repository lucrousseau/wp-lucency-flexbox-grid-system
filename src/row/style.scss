@use "sass:math";

@import "../styles/variables";
@import "../styles/mixins";
@import "../styles/commons";

@mixin colWidth($prefix: null, $size) {
	$prefix: getPrefix($prefix);

	&--#{$prefix}#{$size} {
		flex: 0 0
			calc(
				((100% / #{$columns}) * #{$size}) -
					(var(--gap) * #{1 - math.div(1, $columns) * $size})
			);
	}
}

.row {
	width: 100%;
	display: flex;
	flex-wrap: wrap;
	gap: var(--gap);
	flex-direction: row;

	// Generate responsive classes for columns
	@each $prefix, $breakpoint in $breakpoints {
		$prefix: getPrefix($prefix);

		@if $prefix == "" {
			&--nowrap {
				flex-wrap: nowrap;
			}
			&--column {
				flex-direction: column;
			}
			&--inline {
				display: inline-flex;
			}
			&--reverse {
				flex-direction: row-reverse;
			}
		} @else {
			@media screen and (max-width: $breakpoint) {
				&--#{$prefix}nowrap {
					flex-wrap: nowrap;
				}
				&--#{$prefix}column {
					flex-direction: column;
				}
				&--#{$prefix}inline {
					display: inline-flex;
				}
				&--#{$prefix}reverse {
					flex-direction: row-reverse;
				}
			}
		}
	}

	> .col {
		flex: 1;
		display: flex;
		box-sizing: border-box;
		flex-direction: column;

		background-color: aqua;

		@each $prefix, $breakpoint in $breakpoints {
			$prefix: getPrefix($prefix);

			@if $prefix == "" {
				// Vertical alignment for Flexbox
				&--top {
					align-self: flex-start;
				}
				&--middle {
					align-self: center;
				}
				&--bottom {
					align-self: flex-end;
				}

				// Pull-right and pull-left for Flexbox
				&--pull-right,
				&--pull-left {
					flex: none;
				}
				&--pull-right {
					margin-left: auto;
				}
				&--pull-left {
					margin-right: auto;
				}
			} @else {
				@media screen and (max-width: $breakpoint) {
					// Vertical alignment for Flexbox
					&--#{$prefix}top {
						align-self: flex-start;
					}
					&--#{$prefix}middle {
						align-self: center;
					}
					&--#{$prefix}bottom {
						align-self: flex-end;
					}

					// Pull-right and pull-left for Flexbox
					&--#{$prefix}pull-right,
					&--#{$prefix}pull-left {
						flex: none;
					}
					&--#{$prefix}pull-right {
						margin-left: auto;
					}
					&--#{$prefix}pull-left {
						margin-right: auto;
					}
				}
			}
		}

		// Generate responsive classes for columns
		@each $prefix, $breakpoint in $breakpoints {
			@if $prefix == "full" {
				@for $size from 1 through $columns {
					@include colWidth($prefix, $size);
				}
			} @else {
				@media screen and (max-width: $breakpoint) {
					@for $size from 1 through $columns {
						@include colWidth($prefix, $size);
					}
				}
			}
		}
	}
}
